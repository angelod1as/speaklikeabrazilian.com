{% extends '_layouts/default/default.html.twig' %}

{% block content %}
<section id='main'>
	<div class='container'>
		<div class="row">
    		<div class='span10'>
    			<div class='row'>
    				<div class='span8'>
    					{% if expression is defined and expression != '' %}
    					<h2 class='subtitle'>{{ no_expressions_message }}</h2>
    					{% else %}
    					{% set expression = set_value('expression') %}
    					<h2 class='subtitle'>Add expression</h2>
    					{% endif %}
    				</div>
    				<hr class='clearfix' />
    				<div class='span10'>
    					{{ form_open(current_url(), {'class': 'form-horizontal'}) }}
    						<div class="control-group">
    							{{ form_label('Expression', 'expression', {'class': 'control-label'}) }}
            					<div class="controls">
            						{{ form_input({'id': 'expression', 'name': 'expression', 'style': 'width: 95%'}, expression) }}
            						<span>
										{{ form_error('expression') }} {% if errors['expression'] is defined %} {{ errors['expression'] }} {% endif %}
									</span>
            					</div>
            				</div>
            				<div class="control-group">
            					{{ form_label('Definition', 'definition', {'class': 'control-label'}) }}
            					<div class="controls">
            						{{ form_textarea({'id': 'definition', 'name': 'definition', 'style': 'width: 95%', 'rows': '4'}, set_value('definition')) }}
            						<span class="help-block"><small>
            							Include as much information about your expression as possible. You can mention 
            							other expressions with the following syntax: [expression_name]
            						</small></span>
            						<span>
										{{ form_error('definition') }} {% if errors['definition'] is defined %} {{ errors['definition'] }} {% endif %}
									</span>
            					</div>
            				</div>
            				<div class="control-group">
            					{{ form_label('Example', 'example', {'class': 'control-label'}) }}
            					<div class="controls">
            						{{ form_textarea({'id': 'example', 'name': 'example', 'style': 'width: 95%', 'rows': '4'}, set_value('example')) }}
            						<span class="help-block"><small>
            						List some synonyms, related words, places or misspellings, separated by 
            						commas (e.g.: Sao Paulo City, NSFW, oldie).
            						</small></span>
            						<span>
										{{ form_error('example') }} {% if errors['example'] is defined %} {{ errors['example'] }} {% endif %}
									</span>
            					</div>
            				</div>
            				<div class="control-group">
            					{{ form_label('Tags', 'tags', {'class': 'control-label'}) }}
            					<div class="controls">
            						{{ form_input({'id': 'tags', 'name': 'tags', 'style': 'width: 95%'}, set_value('tags')) }}
            						<span>
										{{ form_error('tags') }} {% if errors['tags'] is defined %} {{ errors['tags'] }} {% endif %}
									</span>
            					</div>
            				</div>
            				<hr />
            				<h4>Who are you?</h4>
            				<div class="control-group">
            					{{ form_label('Your pseudonym', 'pseudonym', {'class': 'control-label'}) }}
            					<div class="controls">
            						{{ form_input({'id': 'pseudonym', 'name': 'pseudonym', 'style': 'width: 95%'}, set_value('pseudonym')) }}
            						<span class="help-block"><small>
            						This is how you will be identified as author of this definition.
            						</small></span>
            						<span>
										{{ form_error('pseudonym') }} {% if errors['pseudonym'] is defined %} {{ errors['pseudonym'] }} {% endif %}
									</span>
            					</div>
            				</div>
            				<div class="control-group">
            					{{ form_label('Your e-mail', 'email', {'class': 'control-label'}) }}
            					<div class="controls">
            						{{ form_input({'id': 'email', 'name': 'email', 'style': 'width: 95%'}, set_value('email')) }}
            						<span>
										{{ form_error('email') }} {% if errors['email'] is defined %} {{ errors['email'] }} {% endif %}
									</span>
            						<div>
            							{% if subscribe is defined and subscribe == 'checked' %}
            								{% set subscribe_checked = true %}
            							{% else %}
            								{% set subscribe_checked = false %}
            							{% endif %}
            							<label class='checkbox muted'>
            								<small>{{ form_checkbox({'name': 'subscribe', 'id': 'subscribe', 'value': 'checked', 'checked': subscribe_checked}) }} Subscribe to our word of day</small>
            							</label>
            						</div>
            					</div>
            				</div>
            				<div class="control-group">
            					{{ form_label('Verification code', 'captcha_', {'class': 'control-label'}) }}
								<div class="controls">
									{{ captcha }}
									<br class='clearfix' />
									<small class='muted'>Can't read the code? <a href="#" id="refresh_captcha">Get a new one</a></small>
								</div>
							</div>
            				<div class="control-group">
            					<div class="controls">
            						{{ form_input({'id': 'captcha_', 'name': 'captcha', 'class': 'medium'}, text) }}
            						<span>
										{{ form_error('captcha') }} {% if errors['captcha'] is defined %} {{ errors['captcha'] }} {% endif %}
									</span>
            					</div>
            				</div>
            				<hr />
            				<div class="row">
            					<div class="" style="text-align: center;">
            						{{ form_submit('submit', 'Send', 'class="btn btn-primary"') }}
            					</div>
            				</div>
    					{{ form_close() }}
    				</div>
    			</div>
    		</div>
    		{# 2 columns wide #}
    		{% include '_layouts/default/sidebar.html.twig' %}
		</div>
	</div>
</section>
<script type='text/javascript'>
templatecallback = function() {
	base_url = '{{ site_url('/') }}';
}
</script>
{% endblock %}